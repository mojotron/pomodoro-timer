<!DOCTYPE html>
<html lang="en">
<head>
	<title>Pomodoro Timer</title>
	<meta charset="utf-8" />
	<link href="styles/reset.css" type="text/css" rel="stylesheet" />
	<link href="styles/main.css" type="text/css" rel="stylesheet" />
</head>
<body>

	<div id="container">

		<div id="header">
			<h1>Pomodoro Timer</h1>
		</div>

		<div id="timer-setup">

			<div class="timer-setup">
				<button class="change-minute pomodoro">+</button>
				<span id="pomodoro-time"></span>
				<button class="change-minute pomodoro">-</button>
			</div>

			<div class="timer-setup">
				<button class="change-minute break">+</button>
				<span id="break-time"></span>
				<button class="change-minute break">-</button>
			</div>

		</div>

		<div id="timer-display">
			<span id="time-countdown"></span>
			<div id="timer-controls">
				<button id="start-control">start</button>
				<button>pouse</button>
				<button>stop</button>
				<button>reset</button>
			</div>
		</div>
	</div>
	
	<script type="text/javascript">
		var defaultPomodoro = 25;
		var defaultBreak = 5;
		var timeCountown = document.querySelector('#time-countdown');
		timeCountown.textContent = defaultPomodoro + ':00';

		// Set up custom session
		var customPomodoro = document.querySelector('#pomodoro-time');
		customPomodoro.textContent = defaultPomodoro + ':00';
		var customBreak = document.querySelector('#break-time');
		customBreak.textContent = defaultBreak + ':00';
		// Adding/substracting minutes to default pomodoro/break
		var changeMinuteBtns = document.querySelectorAll('.change-minute');
		changeMinuteBtns.forEach((button) => {
			button.addEventListener('click', (e) => {
				// Don't wanna negative time
				if(defaultPomodoro <= 0 || defaultBreak <= 0){
					if(button.textContent === '-'){
						return;
					}
				}
				// Don't wanna over 60 min, pomodoro is for high focus work
				if(defaultPomodoro >= 60){
					if(button.textContent === '+'){
						alert('High focus work over 60 minuts it is not productive!');
						return;
					}
				}
				// Don't wanna break session over 20 minutes
				if(defaultBreak >= 20){
					if(button.textContent === '+'){
						alert('To much break time, focus on your work!!!');
						return;
					}
				}
				// Accessing buttuns in node list with position index
				if(button === changeMinuteBtns[0]){
					defaultPomodoro += 1;
				}else if(button === changeMinuteBtns[1]){
					defaultPomodoro -= 1;
				}else if(button === changeMinuteBtns[2]){
					defaultBreak += 1;
				}else{
					defaultBreak -=1;
				}
				// Displaying new values
				customPomodoro.textContent = defaultPomodoro + ':00';
				customBreak.textContent = defaultBreak + ':00';
				timeCountown.textContent = defaultPomodoro + ':00';
			});
		});

	var startBtn = document.querySelector('#start-control');
	startBtn.addEventListener('click', () => {
		var currentTime = Date.parse(new Date());
		var deadline = new Date(currentTime + defaultPomodoro*60*1000);
		countDown(deadline);
	})
	//CountDown 
	
	
	function countDown(deadline){
		var timerTime = Date.parse(deadline) - Date.parse(new Date());
		var minutes = Math.floor((timerTime / (1000 * 60)) % 60);
		var seconds = Math.floor((timerTime / 1000) % 60);
		var hours = Math.floor((timerTime / (1000 * 60 * 60)) % 24);
		console.log(minutes + ':' + seconds);
	}

	

	</script>
</body>
</html>